<div class="title">
  <h1>Формирование команд</h1>
  <div class="buttons">
    <button mat-stroked-button color="primary" (click)="setEditAllowed()" *ngIf="image && !editingAllowed">Вернуться к редактированию</button>
    <button mat-stroked-button color="warn" (click)="removeImage()" *ngIf="image">Завершить сеанс</button>
  </div>
</div>

<div class="choice" *ngIf="!image">
  <label>Выберите вариант работы с системой:</label>
  <mat-radio-group>
    <mat-radio-button value="1" color="warn" [checked]="imageUploadRequired" (change)="changeWorkOption()">Я хочу загрузить изображение клавиатуры</mat-radio-button>
    <mat-radio-button value="2" color="warn" [checked]="!imageUploadRequired" (change)="changeWorkOption()">Перейти к импорту координат</mat-radio-button>
  </mat-radio-group>
</div>

<div class="error" *ngIf="message">{{message}}</div>

<section class="important">
  <section *ngIf="imageUploadRequired">
    <p [class.current]="currentStep === 1"><mat-icon [style.opacity]="currentStep > 1 ? '1' : '0'">check</mat-icon>
      Шаг 1. Загрузите изображение.</p>
    <p [class.current]="currentStep === 2"><mat-icon [style.opacity]="currentStep > 2 ? '1' : '0'">check</mat-icon>
      Шаг 2. Задайте ширину изображения клавиатуры и перетащите его мышью в нужное место.</p>
    <p [class.current]="currentStep === 3"><mat-icon [style.opacity]="currentStep > 3 ? '1' : '0'">check</mat-icon>
      Шаг 3. Кликайте на область клавиатуры, чтобы сохранить координаты. Импортируйте координаты из файла. При необходимости
      измените значения координат вручную.</p>
  </section>
  <section *ngIf="!imageUploadRequired">
    <p>Импортируйте координаты из файла.</p>
  </section>
</section>

<app-import-image *ngIf="!image && imageUploadRequired"></app-import-image>

<div *ngIf="image && imageUploadRequired" class="image-block">
  <app-robot-area></app-robot-area>
</div>

<app-command-table></app-command-table>

<div class="import" *ngIf="!imageUploadRequired || (image && !editingAllowed)">
  <h2>Импорт координат из файла .txt</h2>
  <section class="import-info">
    <p>На каждой строке - 1 координата в формате:</p>
    <p><code>Название: X Y Z</code></p>
    <p>Правила:</p>
    <ul>
      <li>Название должно быть уникальным для каждой координаты</li>
      <li>После названия ставится двоеточие без пробелов</li>
      <li>Координаты указываются через пробел (первое значение - X, второе - Y, третье - Z)</li>
      <li>Значение коодинат указываются в миллиметрах</li>
    </ul>
    <p>Пример:</p>
    <pre><code>first:0.237525 0.133799 0.0463589
second:1 2 3
third:123 547 0</code></pre>
  </section>
  <button mat-raised-button color="primary" (click)="openDialogPointsFile($event)">
    Выбрать файл для импорта
    <input type="file" style="display: none;" #inputFilePoints (change)="changeFilePoints($event)" />
  </button>
</div>


<!--<div [ngClass]="validateError ? 'error' : 'message'" *ngIf="validateError && !fieldIdError && importMessage">{{importMessage}}</div>-->
<!--<ul *ngIf="importErrors && !fieldIdError && importMessage" class="error">-->
<!--  <li *ngFor="let error of importErrors">{{error}}</li>-->
<!--</ul>-->

<!--  <div class="message" *ngIf="coordValidateMessage && !validateError">{{coordValidateMessage}}</div>-->
