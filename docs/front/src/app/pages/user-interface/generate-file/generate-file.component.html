<h1>Генерация файла запуска</h1>
<p *ngIf="coordinateList.length === 0">
  Список доступных команд пуст. Сначала добавьте команды.
</p>
<p *ngIf="errorMessage.length > 0">{{errorMessage}}</p>
<ng-container *ngIf="coordinateList.length > 0">
  <p>Кликайте на команды, чтобы добавить команду в список.</p>
  <p><strong>Доступные команды:</strong></p>
  <mat-list role="list">
    <div role="listitem" *ngFor="let item of coordinateList">
      {{item.name}}
      <button mat-icon-button color="warn" (click)="choice(item.id)">
        <mat-icon>add_circle</mat-icon>
      </button>
      <mat-divider></mat-divider>
    </div>
  </mat-list>
  <h2>Файл запуска</h2>
  <p>Сформируйте файл запуска. Команды можно менять местами.</p>
  <div cdkDropList class="list" (cdkDropListDropped)="drop($event)" #commandList>
    <div class="box" *ngFor="let item of commands; let i = index" cdkDrag>
      <div class="handle" cdkDragHandle>
        <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
          <path d="M0 0h24v24H0z" fill="none"></path>
        </svg>
      </div>
      <div class="custom-placeholder" *cdkDragPlaceholder>Вставь меня сюда</div>
      <div class="text">
        <div class="command-name">
          №{{i+1}}. Команда: <strong><u>{{item.coordinate.name}}</u></strong> (ID={{item.id}})
        </div>
        <div class="delay">
          <span>пауза:</span>
          <mat-form-field appearance="fill">
            <input type="text" matInput [id]="'delay-' + item.id" #delay [value]="item.delay"
                   (change)="changeDelay(item, delay.value)" (click)="savePrevDelay(delay.value)">
          </mat-form-field>
          <span>сек.</span>
          <span [class]="rowHasError ? 'error' : 'message'" *ngIf="rowId == item.id">{{messageRow}}</span>
        </div>
      </div>
      <mat-icon color="warn" (click)="remove(item.id)">cancel</mat-icon>
    </div>
  </div>
  <div class="export" *ngIf="commands.length > 0">
    <div class="message-robot" [class]="armbotButtonDisabled ?'error' : 'message'">{{armbotMessage}}</div>
    <button mat-raised-button color="warn" (click)="armbotStart()" class="rocket" [disabled]="armbotButtonDisabled">Запустить робота</button>
    <button mat-raised-button color="primary" (click)="exportFileTxt()">Экспорт в .txt
      <a [href]="exportTxtUrl" style="display: none" #exportTxt></a>
    </button>
  </div>
</ng-container>
